<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ—…éŠæ‰‹å¸³ãƒ»Our Travel Diary</title>
  
  <!-- PWA åŸºæœ¬è¨­å®š -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FFD1DC">
  <link rel="apple-touch-icon" href="assets/icon.png">

  <!-- Google Font: Zen Maru Gothic -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Font Awesome 6 Free -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['"Zen Maru Gothic"', 'sans-serif'],
          },
          colors: {
            'sakura': '#FFD1DC',
            'beige': '#FFF9E3',
            'aqua': '#B0E0E6',
            'cocoa': '#8B7355',
          },
          borderRadius: {
            '4xl': '2.5rem',
          }
        }
      }
    }
  </script>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body class="bg-beige min-h-screen text-cocoa antialiased">

  <div id="app"></div>

  <!-- é€™è£¡æ”¾ main.js å…§å®¹ï¼Œæˆ–æ˜¯ç¨ç«‹æª”æ¡ˆå¼•å…¥ -->
  <script type="module">
    // main.js å…§å®¹ç›´æ¥å¯«åœ¨é€™è£¡ï¼ˆæˆ–ä¹‹å¾Œæ”¹æˆ <script src="main.js" type="module"></script>ï¼‰
    const { createApp, ref, computed, onMounted, watch } = Vue;

    // ------------------- Header Component -------------------
    const Header = {
      template: `
        <div class="relative h-[38vh] min-h-[260px] w-full overflow-hidden">
          <!-- èƒŒæ™¯åœ– -->
          <div class="absolute inset-0">
            <img 
              src="https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" 
              alt="æ«»èŠ±èƒŒæ™¯" 
              class="object-cover w-full h-full brightness-95"
            >
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-beige/70"></div>
          </div>
          
          <!-- æ¨™é¡Œ -->
          <div class="absolute bottom-6 left-5 right-5 text-center z-10">
            <h1 class="text-4xl font-bold text-white drop-shadow-lg">æ—…éŠæ‰‹å¸³</h1>
            <p class="text-white/90 mt-1 text-lg drop-shadow">èˆ‡æ«»èŠ±ä¸€èµ·è¨˜éŒ„æ—…ç¨‹</p>
          </div>
        </div>
      `
    };

    // ------------------- Floating â†’ Sticky Tabs -------------------
    const FloatingTabs = {
      props: ['activeTab'],
      emits: ['update:activeTab'],
      setup(props, { emit }) {
        const isSticky = ref(false);
        const tabs = ref([
          { id: 'schedule', label: 'è¡Œç¨‹', icon: 'calendar-days' },
          { id: 'map',      label: 'å°èˆª', icon: 'map-location' },
          { id: 'vouchers', label: 'æ†‘è­‰', icon: 'ticket' },
          { id: 'list',     label: 'æ¸…å–®', icon: 'list-check' },
          { id: 'expense',  label: 'è¨˜å¸³', icon: 'yen-sign' },
        ]);

        onMounted(() => {
          window.addEventListener('scroll', handleScroll);
          handleScroll(); // åˆæ¬¡åˆ¤æ–·
        });

        const handleScroll = () => {
          // ç•¶æ²é Header é«˜åº¦ç´„ 70% æ™‚åˆ‡æ› sticky
          const headerHeight = window.innerHeight * 0.38;
          isSticky.value = window.scrollY > headerHeight * 0.7;
        };

        return {
          tabs,
          isSticky,
          activeTab: computed({
            get: () => props.activeTab,
            set: (val) => emit('update:activeTab', val)
          })
        };
      },
      template: `
        <nav 
          :class="[
            'z-50 transition-all duration-300',
            isSticky 
              ? 'fixed top-0 left-0 right-0 bg-beige/95 backdrop-blur-md shadow-sm border-b border-sakura/30'
              : 'absolute bottom-[-3.2rem] right-5 flex justify-end'
          ]"
        >
          <div 
            :class="[
              isSticky 
                ? 'flex w-full justify-around py-3 px-4'
                : 'inline-flex bg-white/80 backdrop-blur-lg rounded-full shadow-lg px-2 py-3 gap-2 border border-sakura/40'
            ]"
          >
            <button 
              v-for="tab in tabs" 
              :key="tab.id"
              @click="activeTab = tab.id"
              :class="[
                'flex flex-col items-center px-3 py-1 rounded-xl transition-colors',
                activeTab === tab.id 
                  ? 'text-sakura bg-sakura/10' 
                  : 'text-cocoa/70 hover:text-sakura hover:bg-sakura/5'
              ]"
            >
              <i :class="'fa-solid fa-' + tab.icon + ' text-xl mb-1'"></i>
              <span class="text-xs font-medium">{{ tab.label }}</span>
            </button>
          </div>
        </nav>
      `
    };

    // ------------------- App ä¸»å…ƒä»¶ -------------------
    const App = {
      components: { Header, FloatingTabs },
      setup() {
        const activeTab = ref('schedule');

        return { activeTab };
      },
      template: `
        <div class="relative pb-24">
          <Header />

          <!-- è² é‚Šè· + åœ“è§’ä¸»å…§å®¹å€ -->
          <main class="-mt-20 mx-4 rounded-4xl bg-white/90 backdrop-blur-sm shadow-xl border border-sakura/20 overflow-hidden min-h-[calc(100vh-38vh+5rem)]">
            <div class="p-5">
              <h2 class="text-2xl font-bold text-cocoa mb-4">
                {{ activeTab === 'schedule' ? 'ä»Šæ—¥è¡Œç¨‹' : activeTab + ' é é¢ï¼ˆé–‹ç™¼ä¸­ï¼‰' }}
              </h2>
              
              <!-- ç›®å‰å…ˆæ”¾è¡Œç¨‹ placeholder -->
              <div v-if="activeTab === 'schedule'" class="space-y-4">
                <div class="bg-sakura/5 rounded-2xl p-4 border border-sakura/30">
                  <div class="flex justify-between items-center">
                    <div>
                      <p class="font-bold text-lg">09:00 - 11:30</p>
                      <p class="text-cocoa/80">æ·ºè‰å¯º â†’ é›·é–€ â†’ ä»²è¦‹ä¸–é€šã‚Š</p>
                    </div>
                    <span class="px-3 py-1 bg-sakura/20 rounded-full text-sm">æ™¯é»</span>
                  </div>
                </div>
                <!-- æ›´å¤šå¡ç‰‡... -->
              </div>
            </div>
          </main>

          <FloatingTabs v-model:activeTab="activeTab" />
          
          <!-- é å°¾ debug -->
          <footer class="text-center text-cocoa/50 py-8 text-sm">
            ğŸŒ¸ Tiffany & Benjamin ğŸŒ¸
          </footer>
        </div>
      `
    };

    createApp(App).mount('#app');
  </script>

  <!-- PWA manifest ï¼ˆä¹‹å¾Œå¯ç¨ç«‹æª”æ¡ˆï¼‰ -->
  <script id="manifest">
    {
      "name": "æ—…éŠæ‰‹å¸³",
      "short_name": "Travel Diary",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#FFF9E3",
      "theme_color": "#FFD1DC",
      "icons": [
        {
          "src": "assets/icon.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    }
  </script>

</body>
</html>
